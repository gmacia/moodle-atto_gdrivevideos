YUI.add("moodle-atto_gdrivevideos-button",function(e,t){var n="atto_gdrivevideos",r="atto_gdrivevideos",i={ERROR_URL:"ERROR: La URL del video debe ser un fichero compartido de Google Drive. Compruebe que ha copiado correctamente el enlace."},s='<div style="position:relative; overflow:hidden; width:100%; max-width:{{width}}px;padding-top:min(56.25%,{{height}}px);">	<object style="position:absolute; top:0; left:0; bottom:0; right:0; width:100%; height:100%;" data="{{url}}">		<p>No puede visualizar el video por no estar registrado en su navegador con la cuenta go.ugr.es.</p>		<p>Seleccionar este enlace para ver el video: <a href="{{url}}" target="_blank">[Ver video]</a></p>	</object>	<div style="width: 80px; height: 80px; position: absolute; opacity: 0; right: 0px; top: 0px;">&nbsp;</div></div>',o='<div style="position:relative; overflow:hidden; width:100%; max-width:{{width}}px;padding-top:min(56.25%,{{height}}px);">	<object style="position:absolute; top:0; left:0; bottom:0; right:0; width:100%; height:100%;" data="{{url}}">		<p>No puede visualizar el video por no estar registrado en su navegador con la cuenta go.ugr.es.</p>		<p>Seleccionar este enlace para ver el video: <a href="{{url}}" target="_blank">[Ver video]</a></p>	</object></div>',u='<div class="atto_gdrivevideos_frame"><div ><label class="mdl-lft-align">Elija tama\u00f1o m\u00e1ximo del v\u00eddeo (16:9):<span class="">El tama\u00f1o del video se adaptar\u00e1 autom\u00e1ticamente al de la pantalla cuando sea menor que el indicado.</span>  </label><select id="resolution" name="resolution" value="640x360" style="justify-self:auto;"> <option value="640x360">640x360</option><option value="1280x720">1280x720</option></select></div><br><div class="mdl-lft-align">URL (copiar y pegar el enlace de Google Drive): <input type="text" size="50" id="url" value=""></input></div><br><div class="mdl-lft-align"><input id="protegido" type="checkbox"> </input> Proteger enlace de v\u00eddeo. <br><span class="mdl-lft-align atto_gdrivevideos_smallfont">Haga click en proteger si quiere bloquear el bot\u00f3n de abrir en nueva ventana de Google. Esto dificulta la copia del enlace del v\u00eddeo, aunque no imposibilita hacerlo por otros medios. Como desventaja, no se permitir\u00e1 al estudiante ver en pantalla completa el v\u00eddeo.</span></label></div><br><div id="id_insert" class="mdl-align"> <button class="atto_gdrivevideos_button atto_media_urlentrysubmit">Insertar</button></div></div>';e.namespace("M.atto_gdrivevideos").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){if(this.get("disabled"))return;if(this.get("customicon")){var e=decodeURIComponent(this.get("customicon")),t="atto_gdrivevideos";this.addButton({iconurl:e,buttonName:t,callback:this._displayDialogue,callbackArgs:t})}else{var t="iconone";this.addButton({icon:"ed/"+t,iconComponent:"atto_gdrivevideos",buttonName:t,callback:this._displayDialogue,callbackArgs:t})}},_displayDialogue:function(t,r){t.preventDefault();var i=600,s=this.getDialogue({headerContent:M.util.get_string("dialogtitle",n),width:i+"px",focusAfterHide:r});s.width!==i+"px"&&s.set("width",i+"px");var o=e.Handlebars.compile(u)({}),a=e.Node.create(o);a.one("#id_insert").on("click",this._doInsertGdriveTemplate,this),s.set("bodyContent",a),s.show(),this.markUpdated()},_doInsertGdriveTemplate:function(t){t.preventDefault(),this.getDialogue({focusAfterHide:null}).hide();var n=e.one("#resolution").get("value"),r=n.substring(0,n.indexOf("x")),u=r*9/16,a=e.one("#url").get("value"),f=e.one("#protegido").get("checked");if(!a.startsWith("https://drive.google.com/file/")){alert(i.ERROR_URL);return}a=a.replace("/view","/preview");var l="",c,h="";f?c=s:c=o,h=e.Handlebars.compile(c)({url:a,width:r,height:u}),l+=h,this.editor.focus(),this.set("isHTML",!1),this.get("host").insertContentAtFocusPoint(l),this.set("isHTML",!0),this.markUpdated()}},{ATTRS:{disabled:{value:!1},keys:{value:null},names:{value:null},variables:{value:null},defaults:{value:null},instructions:{value:null},customicon:{value:null},ends:{value:null}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
